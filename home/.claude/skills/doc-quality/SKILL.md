# Documentation Quality Review

以下に定義する品質基準に基づいて、現在のリポジトリのドキュメントを評価・レビューします。

## 品質基準

**6つの基本原則**
1. **Docs as Code** — ドキュメントをソースコードと同等のバージョン管理で扱う
2. **Single Purpose** — 要件と運用手順など、非互換なコンテンツを混在させない
3. **ADR-Based Decisions** — 設計判断・採用理由・代替案・影響範囲を ADR として記録する
4. **Single Source of Truth** — 情報は1箇所に置き、他からはクロスリファレンスで参照
5. **Template-Driven Creation** — 新規ドキュメントは既存テンプレートから生成
6. **Incremental Updates** — 大規模な一括更新より、頻繁な小さな更新を優先

**ドキュメントカテゴリ**

| カテゴリ | 内容 |
|----------|------|
| Requirements | プロジェクトのゴール・スコープ・ユースケース・制約（実装詳細を含まない） |
| Functional Specifications | ユーザー向け振る舞い・例外処理・受け入れ基準 |
| Design Documentation | アーキテクチャ・データモデル・インターフェース設計・シーケンス |
| Architecture Decision Records | 技術選択の根拠・代替案・トレードオフ |
| Runbooks | デプロイ・インシデント対応・メンテナンス手順 |
| Developer Guides | ローカル開発セットアップ・テスト・ブランチ戦略・リリース手順 |

**推奨ディレクトリ構成**

```
docs/
├── 00_overview/    # プロジェクト概要・用語集
├── 10_requirements/ # 要件定義
├── 20_specs/       # 仕様（機能・API・データ）
├── 30_design/      # アーキテクチャ・デプロイ設計
├── 40_adr/         # アーキテクチャ決定記録（連番）
├── 50_runbook/     # 運用手順
└── 60_dev/         # 開発者ガイド
```

**命名規則**
- ファイル名は kebab-case（例: `mail-requirements.md`）
- 日付付きファイルは `YYYY-MM-DD_` プレフィックス
- ADR は `adr-0001-<title>.md` 形式（連番4桁）
- Changelog は `YYYY-MM.md` 形式

**禁止事項**
- リポジトリへのシークレット保存（環境変数・シークレットマネージャを使用）
- Mermaid 以外の形式の図（バージョン管理非対応）

**AI 活用ガイドライン**
- 適切な用途: 初稿作成・チェックリスト・フォーマット・コマンド提案
- 必須人間レビュー: セキュリティ関連・本番運用・コンプライアンス
- AI 生成コンテンツには使用プロンプトと根拠を保存する

## 実行手順

1. **ドキュメント構造の把握**
   ```bash
   find docs/ -type f -name "*.md" | sort
   ```
   - `docs/` ディレクトリが存在しない場合は現在のルートを確認

2. **各カテゴリの存在確認**
   - 推奨ディレクトリ構成と照合
   - 不足しているカテゴリを特定
   - Minimum Viable Setup（README・要件・機能仕様・初期ADR・デプロイRunbook）の充足確認

3. **命名規則チェック**
   - ファイル名が kebab-case か確認
   - ADR が `adr-NNNN-<title>.md` 形式か確認
   - Changelog が `YYYY-MM.md` 形式か確認

4. **原則適合チェック（各ドキュメントをサンプリングして確認）**
   - Single Purpose: 複数カテゴリのコンテンツが混在していないか
   - ADR-Based Decisions: 設計判断に ADR が対応しているか
   - Single Source of Truth: 同一情報が複数箇所に重複していないか
   - シークレットが含まれていないか

5. **ダイアグラム形式確認**
   - 図が Mermaid 形式で記述されているか
   - 画像ファイル（PNG/SVG）として管理されていないか

6. **AIコンテンツの確認**
   - AI生成コンテンツにプロンプト・根拠の記録があるか
   - セキュリティ・本番運用手順に人間レビューの証跡があるか

## レポート形式

以下の構成でレビュー結果を出力する：

```
## ドキュメント品質レビュー

### 構成評価
| カテゴリ | 状態 | 備考 |
|----------|------|------|
| Requirements    | ✅ / ⚠️ / ❌ | ... |
| Specs           | ✅ / ⚠️ / ❌ | ... |
| Design          | ✅ / ⚠️ / ❌ | ... |
| ADR             | ✅ / ⚠️ / ❌ | ... |
| Runbooks        | ✅ / ⚠️ / ❌ | ... |
| Developer Guide | ✅ / ⚠️ / ❌ | ... |

### 原則適合チェック
- [✅/⚠️/❌] Docs as Code
- [✅/⚠️/❌] Single Purpose
- [✅/⚠️/❌] ADR-Based Decisions
- [✅/⚠️/❌] Single Source of Truth
- [✅/⚠️/❌] Template-Driven Creation
- [✅/⚠️/❌] Incremental Updates

### 命名規則
- [✅/⚠️/❌] kebab-case
- [✅/⚠️/❌] ADR 連番フォーマット
- [✅/⚠️/❌] シークレット不在

### 改善提案（優先度順）
1. 高: ...
2. 中: ...
3. 低: ...
```

## 注意事項
- セキュリティ関連ドキュメント（vault, secrets）の中身は開かない
- `.gitignore` 対象のファイルは存在確認のみ（内容は確認しない）
- レビュー結果の改善提案は現実的で実行可能なものに絞る
