---
name: create-skill
description: ユーザーの要件をヒアリングして新しいスキル（SKILL.md）を生成・配置する。ユーザーが「スキルを作りたい」「新しいスラッシュコマンドを追加したい」「/create-skill」と言ったときに使う。
---

# スキル作成

ユーザーの要件をヒアリングし、既存スキルのパターンに基づいて新しいスキル（SKILL.md）を生成・配置する。

## 前提条件

- スキルディレクトリが存在すること: `~/.claude/skills/`

## ステップ1: ヒアリング

以下の項目をユーザーに確認する。回答が揃うまで先に進まない。

| 項目 | 質問 | 補足 |
|------|------|------|
| スキル名 | どのコマンド名で呼び出しますか？（例: `review-pr`, `gen-test`） | kebab-case 推奨 |
| 目的・概要 | このスキルは何をしますか？（1〜3行で） | SKILL.md の冒頭説明文になる |
| スキルタイプ | 単純型 or オーケストレーター型？ | 下記タイプ定義を参照 |
| 主要ステップ | どんな処理をどの順番で行いますか？（箇条書きで） | 4ステップに整理する |
| 前提条件 | このスキルを使う前にユーザーが準備すべきことは？ | 例: `git add` 済み、等 |
| テンプレート要否 | 生成物のテンプレートが必要ですか？ | 単純型のドキュメント生成系に多い |

**スキルタイプ定義:**

| タイプ | 特徴 | 既存例 |
|--------|------|--------|
| 単純型 | 単一目的の手順。4ステップフロー + 任意テンプレート | commit, doc-adr, doc-runbook, compose-scaffold |
| オーケストレーター型 | トリガー検出 → 複数スキルへ委譲 | doc |

## ステップ2: SKILL.md ドラフト生成

ヒアリング結果を元に、以下のテンプレートを適用してドラフトを生成する。
**テンプレートをそのまま出力しない。ヒアリング内容で具体的に埋める。**

### 単純型テンプレート

````markdown
---
name: <スキル名>
description: <スキルの目的と、Claude が自動起動すべき状況を具体的に記述する。「〜したいと言ったときに使う」など指示的に書く>
---

# <スキル名>

<目的・概要（1〜3行）>

## 前提条件

- <前提条件>

## ステップ1: <準備・既存確認>

<確認すべき既存状態や準備操作>

## ステップ2: <主要作業>

<コアとなる処理の詳細>

（テンプレートがある場合）
**テンプレート:**
```markdown
# <生成物のテンプレート>
```

## ステップ3: 品質自己チェック

| チェック項目 | 確認内容 |
|-------------|---------|
| <項目1> | <確認内容1> |

チェック結果は「✅ 全項目パス」または「⚠️ 修正済み（修正内容）」と明記する。

## ステップ4: 報告

- <報告項目>

## 注意事項

- <禁止事項・ガードレール>
````

### オーケストレーター型テンプレート

````markdown
---
name: <スキル名>
description: <スキルの目的と、Claude が自動起動すべき状況を具体的に記述する。「〜したいと言ったときに使う」など指示的に書く>
---

# <スキル名>（オーケストレーター）

<目的・概要（1〜3行）>

## ステップ1: トリガー検出と委譲先の判定

| トリガー | 委譲先スキル |
|---------|------------|
| <トリガー1> | <スキル名1> |

複数トリガーに該当する場合は、すべての委譲先スキルを順に実行する。

## ステップ2: 個別スキルへの委譲

特定した各委譲先スキルに対して:
1. `~/.claude/skills/<スキル名>/SKILL.md` を Read ツールで読み込む
2. そのファイルに記載された手順に従って処理を行う

## ステップ3: 完了報告

1. 実行した委譲先スキルの一覧
2. 各スキルの処理結果

## 注意事項

- <禁止事項・ガードレール>
````

生成したドラフトをユーザーに提示し、確認を求める:

```
--- ドラフト確認 ---
配置先: home/.claude/skills/<スキル名>/SKILL.md

<ドラフト全文>

このまま書き出してよろしいですか？修正があればお知らせください。
```

## ステップ3: 品質自己チェック

ユーザー承認後、書き出し前に以下を確認する。**すべてパスしてから**ステップ4に進む。

| チェック項目 | 確認内容 |
|-------------|---------|
| frontmatter | `name` と `description` が YAML frontmatter に記載されているか |
| description の質 | 受動的表現でなく「〜したいと言ったときに使う」など指示的に書かれているか |
| スキル名 | kebab-case で命名されているか |
| 重複確認 | `~/.claude/skills/` に同名ディレクトリが存在しないか |
| タイプ整合性 | 選択したタイプのテンプレートに従っているか |
| ステップ完結性 | 各ステップが独立して理解可能か |
| 4ステップフロー | 単純型の場合、準備→主要作業→チェック→報告の順か |
| テンプレート具体化 | プレースホルダー（`<...>` 形式）が残っていないか |
| 前提条件の明示 | ユーザーが事前に何をすべきか明記されているか |
| ユーザー承認確認 | ユーザーからの明示的な承認を得たか |
| シークレット不在 | パスワード・トークン等が含まれていないか |

## ステップ4: ファイル書き出しと報告

ディレクトリを作成し、Write ツールで SKILL.md を配置する。

完了後に以下を報告する:
- 作成したファイルのパス
- ステップ3のチェック結果
- 利用方法: `/<スキル名>` で呼び出し可能

## 注意事項

- ユーザーの明示的な承認なしにファイルを書き出さない
- 同名スキルが存在する場合は上書きせず、ユーザーに確認してから進む
- テンプレートをそのまま出力しない（ヒアリング内容で具体化する）
- SKILL.md 以外のファイル（依存スクリプト等）は原則作成しない
